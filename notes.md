# Project Requirements

* Home Page
* Auth

  * ~~Use devise gem - [https://github.com/heartcombo/devise](https://github.com/heartcombo/devise)~~
  * ~~Admin/Customer roles~~
  * ~~Admin has CRUD privileges to products~~
  * ~~Customer registration, login, and logout~~
* Products

  * ~~Pagination - use pagy gem - [https://github.com/ddnexus/pagy](https://github.com/ddnexus/pagy)~~
  * ~~Filter and sorting - use hotwire - [https://www.youtube.com/watch?v=HURqvNJF4T0](https://www.youtube.com/watch?v=HURqvNJF4T0)~~
  * ~~Customer can view and add product to cart.~~
  * ~~In stock/Out of stock feature~~
* Cart

  * ~~Customer can add products and checkout.~~
  * ~~No payment integration needed.~~
* Payments

  * ~~List of customer purchases~~

Nice to have:

* Reviews

  * ~~Customer can add a score and comment to product~~
  * ~~Only one review per customer per product~~
  * ~~Admin can reply~~
* Wishlist

  * ~~List of customer product wishlist~~

Also use Slim for HTML template formatting - [https://github.com/slim-template/slim-rails](https://github.com/slim-template/slim-rails)

# Database (Model) Structure

Assumption: Attributes auto-generated by rails (e.g. timestamp) are expected to be included, with the exception of model IDs (e.g. user_id) as explicitly stated in each model for database relationship purposes.

* User

  * user_id : integer
  * email : string
  * password : string <-- hashed
  * first_name : string
  * last_name : string
  * contact_no : string
  * address : string
  * role : enum <-- admin or customer
* Product

  * product_id : integer
  * name : string
  * description : string
  * quantity : integer
  * price : decimal
* Cart

  * cart_id : integer
  * user_id : integer <-- foreign key (nullable)
  * total_price : decimal <-- price of all products currently in the cart
  * is_current : boolean <-- true if order is used by cart in current session; set to false if user have made a purchase with the cart and its items but deleted if user logs out, closed the browser, etc.
* Order (Join Table)

  * product_id : integer <-- foreign key (not nullable; order is destroyed when product is destroyed)
  * cart_id : integer <-- foreign key (nullable)
  * quantity : integer <-- number of items ordered from product
  * price : decimal <-- quantity * price of product
* Payment

  * payment_id : integer
  * user_id : integer <-- foreign key (nullable)
  * cart_id : integer <-- foreign key (not nullable)
  * shipping_address : string <-- may occur that the user wants a different address for the purchased order; the default address used is the user's address data (customers)

Optionally:

* Review

  * review_id : integer
  * user_id : integer <-- foreign key (not nullable)
  * product_id : integer <-- foreign key (not nullable)
  * score : integer <-- between 1-10
  * comment : text
  * admin_reply : text
* WishList (Join Table)

  * product_id : integer <-- foreign key (not nullable)
  * user_id : integer <-- foreign key (not nullable)

# Meeting Notes

## 09/15/23

1. Use 'debugger' method for debugging during web application runtime.
2. Deadline of practice project: **September 21, 2023**.
3. Sample of ActiveRecord enum.

   ```
   enum role: { "Admin": 0, "User": 1, "Super Admin": 2}
   ```
4. `importmap.rb` is where all npm packages (javascript) are located for including in a rails project.

## 09/20/23

1. ~~Polish practice project.~~

* ~~Paginate reviews.~~
* ~~Paginate payments.~~

2. ~~Rails magic:~~

```
  form_with model: [@product, @product.order_items.build]
  @order_item if @order_item.present? # will work after render in create
```

3. ~~Study slims and convert all html code to slims.~~
4. ~~Study Hotwire Turbo (Turbo and StimulusJS).~~

## 09/27/23

1. Add turbo-stream to practice project (refer to reference video).
2. Add modals to practice project (refer to reference video).
3. Look on nested forms and implement product variants per product - [Reference](https://www.driftingruby.com/episodes/building-a-questionnaire)
4. Study scope in rails.
5. Study and practice all modules of devise.

Optional:

* Study rspec (for behavior driven development).
* Add front-end designs (e.g. bootstrap, tailwind) to practice project.

Current Challenges:

* How to make a modal dialog (appear in center of screen and darken background, etc.) with Tailwind?
* How to update pagy when doing Create or Destroy operations in a list?
* In a form with multiple fields (select, input, click, etc.), how to debounce only one field upon submission?
* Do we eventually have to use broadcasting with turbo streams in a real project?
* Add pagy to cart and its orders?
